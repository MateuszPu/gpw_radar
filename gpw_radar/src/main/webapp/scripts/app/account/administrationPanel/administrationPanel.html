<breadcrumbs translate-path="panel.title"></breadcrumbs>

<div class="wrapper wrapper-content animated fadeInRight" ng-cloak>
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5><span class="fa fa-heartbeat"></span>
                    &#xA0;<span translate="panel.appStatus">Application status</span></h5>
                    <div ibox-tools></div>
                </div>
                <div class="ibox-content">
                    <div class="panel-body">
                        <div ng-show='isApplicationUpdating'>
                            <span class="label label-info" style='font-size: 100%' translate="panel.updating">Application is updating</span>
                            <hr/>
                            <progressbar animate="true" class="progress-striped" value='stepOfUpdate/358*100' type="danger">{{stepOfUpdate/358*100 | number:0}}%</progressbar>
                        </div>
                        <div>
                            <p>
                                <span ng-if = "differenceBetweenDaysAndDB === 0">
                                   <span class="label label-success" style='font-size: 100%' translate="panel.upToDate" translate-values="{date: '{{topDateOfStock | date: 'dd/MM/yyyy'}}'}">Stocks are up to:</span>
                                </span>
                                <span ng-if="differenceBetweenDaysAndDB > 0">
                                   <span class="label label-danger" style='font-size: 100%' translate="panel.upToDate" translate-values="{date: '{{topDateOfStock | date: 'dd/MM/yyyy'}}'}">Stocks are up to:</span>
                                </span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5><span class="fa fa-eye"></span>
                        &#xA0;<span translate="panel.followedStocks.title">Followed Stocks</span></h5>
                    <div ibox-tools></div>
                </div>
                <div class="ibox-content">
                    <div class="panel-body">
                        <div class="panel panel-default">
                            <table st-table="stocksFollowedByUserList" st-safe-src="smartTableSafeCopy"
                                   class="table table-striped">
                                <thead>
                                <tr>
                                    <th st-sort="ticker" class="col-xs-1"><a href=""><span translate="panel.followedStocks.ticker">Ticker</span></a></th>
                                    <th st-sort="stockName" class="col-xs-2"><a href=""><span translate="panel.followedStocks.stockName">Name</span></a></th>
                                    <th class="col-xs-1"><span translate="panel.followedStocks.action">Follow</span></th>
                                    <th class="col-xs-1"><span translate="panel.followedStocks.externalwebsites">External websites</span></th>
                                </tr>
                                <tr>
                                    <th colspan="5"><input st-search="" class="form-control"
                                                           placeholder="{{'panel.search' | translate}}" type="text"/></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="item in stocksFollowedByUserList">
                                    <td>{{item.stockTicker}}</td>
                                    <td>{{item.stockName}}</td>
                                    <td>
                                        <!--<a class="btn btn-danger" href="" ng-click="stopFollowStock(item.stockId)"><i class="fa fa-minus-square"></i></a>-->
                                        <follow-stock id="item.stockId" update-data="getAllStocksFollowed()"></follow-stock>
                                    </td>
                                    <td>
                                        <a href="http://stooq.pl/q/a/?s={{item.stockTicker}}"
                                           target="_blank" translate="panel.followedStocks.technical">A. technical</a> <br>
                                        <a href="http://www.stockwatch.pl/gpw/{{item.stockShortName}},komunikaty,wyniki.aspx"
                                           target="_blank" translate="panel.followedStocks.fundamental">A. fundamental</a>
                                    </td>

                                </tr>
                                </tbody>
                                <tfoot>
                                <tr>
                                    <td colspan="5" class="text-center">
                                        <div st-pagination="" st-items-by-page="5"
                                             st-displayed-pages="3"></div>
                                    </td>
                                </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5><span class="fa fa-calendar"></span>
                        &#xA0;<span translate="panel.calendar.title">Calendar</span></h5>
                    <div ibox-tools></div>
                </div>
                <div class="ibox-content">
                    <div class="panel-body">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <button class="btn btn-success btn-xs" ng-click="getFollowedStockFinanceEvents()" translate="panel.getFollowed">Get followed</button>
                                <button class="btn btn-success btn-xs" ng-click="getAllStockFinanceEvents()" translate="panel.getAll">Get all</button>
                                <div ng-if="financeEventsLoaded">
                                    <pre ng-hide='clickedDate' translate="panel.calendar.clickDate"></pre>
                                    <div ng-show='clickedDate'>
                                        <pre><em translate="panel.calendar.financeEvent" translate-values="{date: '{{event.date | date: 'dd/M/yyyy'}}', ticker: '{{event.ticker}}', message: '{{event.message}}'}">Finance event message</em> </pre>
                                    </div>
                                    <div ui-calendar="uiConfig.calendar" ng-model="eventSources"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
